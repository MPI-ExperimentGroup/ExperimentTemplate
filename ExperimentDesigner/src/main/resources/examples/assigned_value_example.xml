<experiment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
    xsi:noNamespaceSchemaLocation="http://frinexbuild.mpi.nl/alpha.xsd"  
    appNameDisplay="Assigned Value Example">
    <deployment state="staging" />  
    <administration allowDataDeletion="true"> 
        <chart label="Total Events (Assignment_Before_Completion)" type="pie">
            <dataset source="tagdata" label="assigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue" colour="#880000" /> 
            <dataset source="tagdata" label="completed" matching="screenName=Assignment_Before_Completion;eventTag=completedValue" colour="#000088" /> 
        </chart> 
        <chart label="Total Events (Assignment_Or_Completion)" type="pie">
            <dataset source="tagdata" label="assigned"  matching="screenName=Assignment_Or_Completion;eventTag=assignedValue" colour="#880000" /> 
            <dataset source="tagdata" label="completed"  matching="screenName=Assignment_Or_Completion;eventTag=completedValue" colour="#000088" /> 
        </chart> 
        <chart label="Total Events (Assignment_Or_Completion_Or_Clear)" type="pie">
            <dataset source="tagdata" label="assigned"  matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue" colour="#880000" /> 
            <dataset source="tagdata" label="completed" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue" colour="#000088" /> 
        </chart>
        <chart label="Event Counts (Assignment_Before_Completion)" type="bar">
            <dataset source="tagdata" label="LophocytesAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Lophocytes" colour="#880000" />
            <dataset source="tagdata" label="LophocytesCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Lophocytes" colour="#000088" />
            <dataset source="tagdata" label="CollencytesAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Collencytes" colour="#880000" />
            <dataset source="tagdata" label="CollencytesCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Collencytes" colour="#000088" />
            <dataset source="tagdata" label="RhabdiferousAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Rhabdiferous" colour="#880000" />
            <dataset source="tagdata" label="RhabdiferousCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Rhabdiferous" colour="#000088" />
            <dataset source="tagdata" label="OocytesAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Oocytes" colour="#880000" />
            <dataset source="tagdata" label="OocytesCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Oocytes" colour="#000088" />
            <dataset source="tagdata" label="SclerocytesAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Sclerocytes" colour="#880000" />
            <dataset source="tagdata" label="SclerocytesCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Sclerocytes" colour="#000088" />
            <dataset source="tagdata" label="MyocytesAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Myocytes" colour="#880000" />
            <dataset source="tagdata" label="MyocytesCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Myocytes" colour="#000088" />
            <dataset source="tagdata" label="ArchaeocytesAssigned" matching="screenName=Assignment_Before_Completion;eventTag=assignedValue;tagValue=Archaeocytes" colour="#880000" />
            <dataset source="tagdata" label="ArchaeocytesCompleted" matching="screenName=Assignment_Before_Completion;eventTag=completedValue;tagValue=Archaeocytes" colour="#000088" />
        </chart>
        <chart label="Event Counts (Assignment_Or_Completion)" type="bar">
            <dataset source="tagdata" label="LophocytesAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Lophocytes" colour="#880000" />
            <dataset source="tagdata" label="LophocytesCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Lophocytes" colour="#000088" />
            <dataset source="tagdata" label="CollencytesAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Collencytes" colour="#880000" />
            <dataset source="tagdata" label="CollencytesCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Collencytes" colour="#000088" />
            <dataset source="tagdata" label="RhabdiferousAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Rhabdiferous" colour="#880000" />
            <dataset source="tagdata" label="RhabdiferousCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Rhabdiferous" colour="#000088" />
            <dataset source="tagdata" label="OocytesAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Oocytes" colour="#880000" />
            <dataset source="tagdata" label="OocytesCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Oocytes" colour="#000088" />
            <dataset source="tagdata" label="SclerocytesAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Sclerocytes" colour="#880000" />
            <dataset source="tagdata" label="SclerocytesCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Sclerocytes" colour="#000088" />
            <dataset source="tagdata" label="MyocytesAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Myocytes" colour="#880000" />
            <dataset source="tagdata" label="MyocytesCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Myocytes" colour="#000088" />
            <dataset source="tagdata" label="ArchaeocytesAssigned" matching="screenName=Assignment_Or_Completion;eventTag=assignedValue;tagValue=Archaeocytes" colour="#880000" />
            <dataset source="tagdata" label="ArchaeocytesCompleted" matching="screenName=Assignment_Or_Completion;eventTag=completedValue;tagValue=Archaeocytes" colour="#000088" />
        </chart>
        <chart label="Event Counts (Assignment_Or_Completion_Or_Clear)" type="bar">
            <dataset source="tagdata" label="LophocytesAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Lophocytes" colour="#880000" />
            <dataset source="tagdata" label="LophocytesCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Lophocytes" colour="#000088" />
            <dataset source="tagdata" label="CollencytesAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Collencytes" colour="#880000" />
            <dataset source="tagdata" label="CollencytesCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Collencytes" colour="#000088" />
            <dataset source="tagdata" label="RhabdiferousAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Rhabdiferous" colour="#880000" />
            <dataset source="tagdata" label="RhabdiferousCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Rhabdiferous" colour="#000088" />
            <dataset source="tagdata" label="OocytesAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Oocytes" colour="#880000" />
            <dataset source="tagdata" label="OocytesCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Oocytes" colour="#000088" />
            <dataset source="tagdata" label="SclerocytesAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Sclerocytes" colour="#880000" />
            <dataset source="tagdata" label="SclerocytesCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Sclerocytes" colour="#000088" />
            <dataset source="tagdata" label="MyocytesAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Myocytes" colour="#880000" />
            <dataset source="tagdata" label="MyocytesCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Myocytes" colour="#000088" />
            <dataset source="tagdata" label="ArchaeocytesAssigned" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=assignedValue;tagValue=Archaeocytes" colour="#880000" />
            <dataset source="tagdata" label="ArchaeocytesCompleted" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=completedValue;tagValue=Archaeocytes" colour="#000088" />
        </chart> 
        <chart label="Metadata Assigned Value (can be overwritten by clearing and reassigning)" type="bar">
            <dataset source="metadata" label="Lophocytes" matching="assigned_value=Lophocytes" colour="#880000" />
            <dataset source="metadata" label="Collencytes" matching="assigned_value=Collencytes" colour="#880000" />
            <dataset source="metadata" label="Rhabdiferous" matching="assigned_value=Rhabdiferous" colour="#880000" />
            <dataset source="metadata" label="Oocytes" matching="assigned_value=Oocytes" colour="#880000" />
            <dataset source="metadata" label="Sclerocytes" matching="assigned_value=Sclerocytes" colour="#880000" />
            <dataset source="metadata" label="Myocytes" matching="assigned_value=Myocytes" colour="#880000" />
            <dataset source="metadata" label="Archaeocytes" matching="assigned_value=Archaeocytes" colour="#880000" />
        </chart>
        <!-- <dataTable label="Events Assigned" source="tagdata;eventTag=assignedValue" columnNames="UserId,ScreenName,EventTag,TagValue,TagDate" /> -->
        <!-- <dataTable label="Events Completed" source="tagdata;eventTag=completedValue" columnNames="UserId,ScreenName,EventTag,TagValue,TagDate" /> -->
        <dataTable label="Events Assigned / Completed (Assignment_Before_Completion)" source="tagdata" matching="screenName=Assignment_Before_Completion;eventTag=%edValue" columnNames="UserId,ScreenName,EventTag,TagValue,TagDate" />
        <dataTable label="Events Assigned / Completed (Assignment_Or_Completion)" source="tagdata" matching="screenName=Assignment_Or_Completion;eventTag=%edValue" columnNames="UserId,ScreenName,EventTag,TagValue,TagDate" />
        <dataTable label="Events Assigned / Completed (Assignment_Or_Completion_Or_Clear)" source="tagdata" matching="screenName=Assignment_Or_Completion_Or_Clear;eventTag=%edValue" columnNames="UserId,ScreenName,EventTag,TagValue,TagDate" />
    </administration>
    <metadata>
        <field controlledMessage="Assigned Value" controlledRegex="." postName="assigned_value" registrationField="assigned_value"/>
    </metadata>
    <presenter type="menu">
        <menuItem featureText="Assignment_Before_Completion" target="Assignment_Before_Completion"></menuItem>
        <menuItem featureText="Assignment_Or_Completion" target="Assignment_Or_Completion"></menuItem>
        <menuItem featureText="Assignment_Or_Completion_Or_Clear" target="Assignment_Or_Completion_Or_Clear"></menuItem>
    </presenter>
    <presenter self="Assignment_Before_Completion" type="metadata">
        <regionReplace regionId="buttonRegion">
            <htmlTokenText featureText="assigned_value: ::metadataField_assigned_value::"/>
            <actionButton featureText="Assign Value">
                <serverValueAssign targetOptions="Lophocytes,Collencytes,Rhabdiferous,Oocytes,Sclerocytes,Myocytes,Archaeocytes" fieldName="assigned_value">
                    <onSuccess>
                        <regionReplace regionId="buttonRegion">
                            <htmlTokenText featureText="assigned_value: ::metadataField_assigned_value::"/>
                            <actionButton featureText="Set Completed">
                                <serverValueComplete fieldName="assigned_value">
                                    <onSuccess>
                                        <regionReplace regionId="buttonRegion">
                                            <htmlTokenText featureText="assigned_value: ::metadataField_assigned_value::"/>
                                            <createUserButton featureText="CreateNewUser" target="Assignment_Before_Completion"/>
                                        </regionReplace>
                                    </onSuccess>
                                    <onError>
                                        <plainText featureText="Setting complete failed"/>
                                    </onError>
                                </serverValueComplete>
                            </actionButton>
                        </regionReplace>
                    </onSuccess>
                    <onError>
                        <plainText featureText="Assigning value failed"/>
                    </onError>
                </serverValueAssign>
            </actionButton>
        </regionReplace>
    </presenter>
    <presenter self="Assignment_Or_Completion" type="metadata">
        <htmlTokenText featureText="assigned_value: ::metadataField_assigned_value::"/>
        <actionButton featureText="Assign Value">
            <serverValueAssign targetOptions="Lophocytes,Collencytes,Rhabdiferous,Oocytes,Sclerocytes,Myocytes,Archaeocytes" fieldName="assigned_value">
                <onSuccess>
                    <gotoPresenter target="Assignment_Or_Completion"/>
                </onSuccess>
                <onError>
                    <plainText featureText="Assigning value failed"/>
                </onError>
            </serverValueAssign>
        </actionButton>
        <actionButton featureText="Set Completed">
            <serverValueComplete fieldName="assigned_value">
                <onSuccess>
                    <gotoPresenter target="Assignment_Or_Completion"/>
                </onSuccess>
                <onError>
                    <plainText featureText="Setting complete failed"/>
                </onError>
            </serverValueComplete>
        </actionButton>
        <createUserButton featureText="CreateNewUser" target="Assignment_Or_Completion"/>
    </presenter>
    <presenter self="Assignment_Or_Completion_Or_Clear" type="metadata">
        <htmlTokenText featureText="assigned_value: ::metadataField_assigned_value::"/>
        <actionButton featureText="Assign Value">
            <serverValueAssign targetOptions="Lophocytes,Collencytes,Rhabdiferous,Oocytes,Sclerocytes,Myocytes,Archaeocytes" fieldName="assigned_value">
                <onSuccess>
                    <gotoPresenter target="Assignment_Or_Completion_Or_Clear"/>
                </onSuccess>
                <onError>
                    <plainText featureText="Assigning value failed"/>
                </onError>
            </serverValueAssign>
        </actionButton>
        <actionButton featureText="Set Completed">
            <serverValueComplete fieldName="assigned_value">
                <onSuccess>
                    <gotoPresenter target="Assignment_Or_Completion_Or_Clear"/>
                </onSuccess>
                <onError>
                    <plainText featureText="Setting complete failed"/>
                </onError>
            </serverValueComplete>
        </actionButton>
        <actionButton featureText="Clear Value">
            <setMetadataValue fieldName="assigned_value" dataLogFormat=""/>
            <gotoPresenter target="Assignment_Or_Completion_Or_Clear"/>
        </actionButton>
        <createUserButton featureText="CreateNewUser" target="Assignment_Or_Completion_Or_Clear"/>
    </presenter>
    <stimuli/>
</experiment>