<experiment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://frinexbuild.mpi.nl/alpha.xsd"
    appNameDisplay="Assigned Value Example">   
    <deployment state="staging" />     
    <administration> 
        <chart label="Total Events" type="pie">
            <tagData label="assigned" colour="#880000" eventTag="assignedValue" /> 
            <tagData label="completed" colour="#000088" eventTag="completedValue" /> 
        </chart>
        <chart label="Metadata Assigned Value" type="bar">
            <metadata label="Lophocytes" fieldName="assigned_value" matching="Lophocytes" colour="#BB0000" />
            <metadata label="Collencytes" fieldName="assigned_value" matching="Collencytes" colour="#AA0022" />
            <metadata label="Rhabdiferous" fieldName="assigned_value" matching="Rhabdiferous" colour="#880044" />
            <metadata label="Oocytes" fieldName="assigned_value" matching="Oocytes" colour="#660066" />
            <metadata label="Sclerocytes" fieldName="assigned_value" matching="Sclerocytes" colour="#440088" />
            <metadata label="Myocytes" fieldName="assigned_value" matching="Myocytes" colour="#2200AA" />
            <metadata label="Archaeocytes" fieldName="assigned_value" matching="Archaeocytes" colour="#0000BB" />
        </chart>
        <chart label="Event Counts" type="bar">
            <tagData label="LophocytesAssigned" eventTag="assignedValue" tagValue="Lophocytes" colour="#880000" />
            <tagData label="LophocytesCompleted" eventTag="completedValue" tagValue="Lophocytes" colour="#000088" />
            <tagData label="CollencytesAssigned" eventTag="assignedValue" tagValue="Collencytes" colour="#880000" />
            <tagData label="CollencytesCompleted" eventTag="completedValue" tagValue="Collencytes" colour="#000088" />
            <tagData label="RhabdiferousAssigned" eventTag="assignedValue" tagValue="Rhabdiferous" colour="#880000" />
            <tagData label="RhabdiferousCompleted" eventTag="completedValue" tagValue="Rhabdiferous" colour="#000088" />
            <tagData label="OocytesAssigned" eventTag="assignedValue" tagValue="Oocytes" colour="#880000" />
            <tagData label="OocytesCompleted" eventTag="completedValue" tagValue="Oocytes" colour="#000088" />
            <tagData label="SclerocytesAssigned" eventTag="assignedValue" tagValue="Sclerocytes" colour="#880000" />
            <tagData label="SclerocytesCompleted" eventTag="completedValue" tagValue="Sclerocytes" colour="#000088" />
            <tagData label="MyocytesAssigned" eventTag="assignedValue" tagValue="Myocytes" colour="#880000" />
            <tagData label="MyocytesCompleted" eventTag="completedValue" tagValue="Myocytes" colour="#000088" />
            <tagData label="ArchaeocytesAssigned" eventTag="assignedValue" tagValue="Archaeocytes" colour="#880000" />
            <tagData label="ArchaeocytesCompleted" eventTag="completedValue" tagValue="Archaeocytes" colour="#000088" />
        </chart>
        <dataTable label="Events Assigned" source="tagdata" eventTag="assignedValue" columnNames="UserId,TagValue,TagDate" />
        <dataTable label="Events Completed" source="tagdata" eventTag="completedValue" columnNames="UserId,TagValue,TagDate" />
        <dataTable label="Events Assigned / Completed" source="tagdata" eventTag="%edValue" columnNames="UserId,TagValue,TagDate" />
    </administration>
    <metadata>
        <field controlledMessage="Assigned Value" controlledRegex="." postName="assigned_value" registrationField="assigned_value"/>
    </metadata>
    <presenter self="Assigned_Value_Presenter" type="metadata">
        <htmlTokenText featureText="assigned_value: ::metadataField_assigned_value::"/>
        <actionButton featureText="Assign Value">
            <serverValueAssign targetOptions="Lophocytes,Collencytes,Rhabdiferous,Oocytes,Sclerocytes,Myocytes,Archaeocytes" fieldName="assigned_value">
                <onSuccess>
                    <gotoPresenter target="Assigned_Value_Presenter"/>
                </onSuccess>
                <onError>
                    <plainText featureText="Assigning value failed"/>
                </onError>
            </serverValueAssign>
        </actionButton>
        <actionButton featureText="Set Completed">
            <serverValueComplete fieldName="assigned_value">
                <onSuccess>
                    <gotoPresenter target="Assigned_Value_Presenter"/>
                </onSuccess>
                <onError>
                    <plainText featureText="Setting complete failed"/>
                </onError>
            </serverValueComplete>
        </actionButton>
        <actionButton featureText="Clear Value">
            <setMetadataValue fieldName="assigned_value" dataLogFormat=""/>
            <gotoPresenter target="Assigned_Value_Presenter"/>
        </actionButton>
        <createUserButton featureText="CreateNewUser" target="Assigned_Value_Presenter"/>
    </presenter>
    <stimuli/>
</experiment>